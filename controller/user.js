/* global require, exports */var CAS = require('node-cas');var casConfig = require('../config/cas');exports.index = function (req, res) {    res.render('index', {        title: '挖财React脚手架工程',        message: "欢迎！！！"    });};exports.list = function (req, res) {    var data;    for (var key in req.body) {        data = JSON.parse(key);    }    var pageSize = parseInt(data.pageSize);    var pageNo = parseInt(data.pageNo);    var start = pageSize * (pageNo - 1);    var end = pageSize * pageNo;    var rows = [], total = 1000;    for (var index = start; index < end; index++) {        rows.push({            id: index,            user: "user" + index,            name: "name" + index,            hello: "hello" + index,            world: "world" + index        });    }    res.json({        total: total,        rows: rows,        ok: true,        msg: null    });};exports.validate = function (req, res, next) {        var cas = new CAS(casConfig);    cas.authenticate(req, res, function (err, data) {        if (err) {            return res.json({err: err});        }        if(!data){            return res.redirect('/login');        }        next();    });};exports.doLogin = function (req, res) {        var cas = new CAS(casConfig);    cas.authenticate(req, res, function (err, data) {        if (err) {            console.log(err);            return res.json({err: err});        }        if(data){            res.setHeader("Set-Cookie", "cas_user=" + data + ";expires=" + new Date(Date.now() + 1000 * 60 * 60 * 1).toGMTString());            res.redirect('/');        }    });};exports.doLogout = function (req, res) {    var cas = new CAS(casConfig);    cas.logout(req, res);};exports.doTestAuto = function (req, res) {    var length = req.body.maxLength;    var input = req.body.input;        var result = [];        for(var i in strs){        var str = strs[i];        if(str.indexOf(input) >= 0){            result.push(str);        }        if(result.length > length){            break;        }    }    res.json({        obj: result,        ok: true,        msg: null    });};var chars = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];var randomStr = function (n) {        var res = "";    for (var i = 0; i < n; i++) {        var id = Math.ceil(Math.random() * 25);        res += chars[id];    }    return res;};var randomStrs = function(n){    var strs = [];    for(var i = 0; i < n; i++){        var length = 5 + Math.ceil(Math.random() * 10);        strs.push(randomStr(length));    }    return strs;};var strs = randomStrs(10000);